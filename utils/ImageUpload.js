import fs from "fs";
import path from "path";
const upload_image = async () => {
  const uploadsDirectory = "./uploads";
  if (!fs.existsSync(uploadsDirectory)) {
    fs.mkdirSync(uploadsDirectory);
  }
  const base64String =
    "data:image/jpeg;base64,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";

  const ext = base64String.split(";base64,/")[0].split("/").pop();
  const base64Data = base64String.replace(/^data:image\/\w+;base64,/, "");
  // Decode base64 to a buffer
  const imageBuffer = Buffer.from(base64Data, "base64");

  // Generate a unique filename (you might want to use a better strategy)
  const filename = path.join(
    uploadsDirectory,
    "image_" + Date.now() + `.${ext}`
  );

  // Save the buffer to a file in the 'uploads' directory
  fs.writeFile(filename, imageBuffer, (err) => {
    if (err) {
      console.error("Error saving the file:", err);
      res.status(500).send("Error saving the file");
    } else {
      console.log(`Image saved at: ${filename}`);
    }
  });
};

export default upload_image;
